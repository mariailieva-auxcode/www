{"remainingRequest":"/Users/radoslavradev/Sites/www/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/radoslavradev/Sites/www/src/components/News.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/radoslavradev/Sites/www/src/components/News.vue","mtime":1591444688771},{"path":"/Users/radoslavradev/Sites/www/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/radoslavradev/Sites/www/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/radoslavradev/Sites/www/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/radoslavradev/Sites/www/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBpbmZvIGZyb20gImpzLXlhbWwtbG9hZGVyIS4uLy4uL25ld3MueWFtbCI7CmltcG9ydCBTZWFyY2ggZnJvbSAiLi9TZWFyY2giOwppbXBvcnQgTWFpbk5ld3MgZnJvbSAiLi9NYWluTmV3cyI7CmltcG9ydCBTZWNvbmRhcnlOZXdzIGZyb20gIi4vU2Vjb25kYXJ5TmV3cyI7CmltcG9ydCBUZXJ0TmV3cyBmcm9tICIuL1RlcnRpZXJ5TmV3cyI7CmltcG9ydCBGb290ZXIgZnJvbSAiLi9Gb290ZXIiCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIk5ld3MiLAogIGNvbXBvbmVudHM6IHsKICAgIFNlYXJjaCwKICAgIE1haW5OZXdzLAogICAgU2Vjb25kYXJ5TmV3cywKICAgIFRlcnROZXdzLAogICAgRm9vdGVyCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZGF0YTogW10sCiAgICAgIGNhdGVnb3JpZXM6IHt9LAogICAgICBmaWx0ZXJlZENhdGVnb3JpZXM6IFtdLAogICAgICBmaWx0ZXJDcml0ZXJpYTogW10sCiAgICAgIC8vIHBvc3RzQnlDYXRlZ29yeTogW10KICAgIH07CiAgfSwKICBiZWZvcmVNb3VudCgpIHsKICAgIHRoaXMuaW5pdCgpOwogICAgdGhpcy5nZXRBbGxDYXRlZ29yaWVzKCk7CiAgICB0aGlzLmdldEZpbHRlcmVkQ2F0ZWdvcmllcygpOwogIH0sCiAgbWV0aG9kczogewogICAgZ2V0UG9zdHNCeUNhdGVnb3J5KGNhdGVnb3J5KSB7CiAgICAgIHJldHVybiB0aGlzLmRhdGEKICAgICAgICAuc2xpY2UoNCwgdGhpcy5kYXRhLmxlbmd0aCkKICAgICAgICAuZmlsdGVyKGUgPT4gZS5jYXRlZ29yaWVzLmluY2x1ZGVzKGNhdGVnb3J5KSAmJiBlLmlzU2hvd24pOwogICAgfSwKICAgIC8qKgogICAgICogR2V0cyBhbGwgY2F0ZWdvcmllcyBsaXN0ZWQgaW4gdGhlIGNtcyBmaWxlCiAgICAgKi8KICAgIGdldEFsbENhdGVnb3JpZXMoKSB7CiAgICAgIGxldCBkaXN0aW5jdENhdGVnb3JpZXMgPSBbCiAgICAgICAgLi4ubmV3IFNldCgKICAgICAgICAgIFtdLmNvbmNhdC5hcHBseSgKICAgICAgICAgICAgW10sCiAgICAgICAgICAgIHRoaXMuZGF0YS5tYXAoZSA9PiBlLmNhdGVnb3JpZXMpCiAgICAgICAgICApCiAgICAgICAgKQogICAgICBdOwogICAgICB0aGlzLmZpbHRlckNyaXRlcmlhID0gZGlzdGluY3RDYXRlZ29yaWVzOwogICAgICB0aGlzLmNhdGVnb3JpZXMgPSBkaXN0aW5jdENhdGVnb3JpZXMucmVkdWNlKAogICAgICAgIChhLCBiKSA9PiAoKGFbYi50b0xvd2VyQ2FzZSgpXSA9IHRydWUpLCBhKSwKICAgICAgICB7fQogICAgICApOwogICAgfSwKICAgIGdldEZpbHRlcmVkQ2F0ZWdvcmllcygpIHsKICAgICAgdGhpcy5maWx0ZXJlZENhdGVnb3JpZXMgPSBbCiAgICAgICAgLi4ubmV3IFNldCgKICAgICAgICAgIFtdLmNvbmNhdC5hcHBseSgKICAgICAgICAgICAgW10sCiAgICAgICAgICAgIHRoaXMuZGF0YS5zbGljZSg0LCB0aGlzLmRhdGEubGVuZ3RoKS5tYXAoZSA9PiBlLmNhdGVnb3JpZXMpCiAgICAgICAgICApCiAgICAgICAgKQogICAgICBdOwogICAgfSwKICAgIC8qKgogICAgICogSWYgdGhlIGFjdGl2ZSBjYXRlZ29yaWVzIGFyZSB1c2VkIGluIGEgc2luZ2xlIG5ld3MKICAgICAqLwogICAgc29tZUNhdGVnb3J5KGUpIHsKICAgICAgcmV0dXJuIGUuY2F0ZWdvcmllcy5zb21lKHggPT4gdGhpcy5maWx0ZXJDcml0ZXJpYS5pbmNsdWRlcyh4LnRvTG93ZXJDYXNlKCkpKTsKICAgIH0sCiAgICAvKioKICAgICAqIENvbWJpbmVzIHRoZSBsb2dpYyBvZiB0aGUgc2VhcmNoIGlucHV0IGFuZCB0aGUgY2F0ZWdvcmllcyBmaWx0ZXIKICAgICAqLwogICAgb25TZWFyY2goZGF0YSkgewogICAgICBsZXQgeyB2YWx1ZSwgY2F0ZWdvcmllcyB9ID0gZGF0YTsKICAgICAgdGhpcy5pbml0KCk7CiAgICAgIHRoaXMuZmlsdGVyQ3JpdGVyaWEgPSBPYmplY3Qua2V5cyhjYXRlZ29yaWVzKS5maWx0ZXIoayA9PiBjYXRlZ29yaWVzW2tdKTsKICAgICAgdGhpcy5kYXRhID0gdGhpcy5kYXRhLm1hcChlID0+IHsKICAgICAgICBpZiAodmFsdWUpIHsKICAgICAgICAgIGlmICgKICAgICAgICAgICAgIWUuZGVzY3JpcHRpb24ubWF0Y2gobmV3IFJlZ0V4cCh2YWx1ZSwgImkiKSkgfHwKICAgICAgICAgICAgIXRoaXMuc29tZUNhdGVnb3J5KCBlKQogICAgICAgICAgKQogICAgICAgICAgICByZXR1cm4geyAuLi5lLCBpc1Nob3duOiBmYWxzZSB9OwogICAgICAgICAgZWxzZSByZXR1cm4gZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYgKCF0aGlzLnNvbWVDYXRlZ29yeShlKSkgcmV0dXJuIHsgLi4uZSwgaXNTaG93bjogZmFsc2UgfTsKICAgICAgICAgIGVsc2UgcmV0dXJuIGU7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgdGhpcy4kZm9yY2VVcGRhdGUoKQogICAgfSwKICAgIC8qKgogICAgICogUHJlcGFyZXMgdGhlIGluaXRpYWwgZGF0YQogICAgICogU2V0cyBhbGwgY2F0ZWdvcmllcyB0byBiZSBzaG93bgogICAgICovCiAgICBpbml0KCkgewogICAgICB0aGlzLmRhdGEgPSBpbmZvCiAgICAgICAgLm1hcChlID0+ICh7IC4uLmUsIGlzU2hvd246IHRydWUsIGRhdGU6IG5ldyBEYXRlKGUuZXhwaXJ5KSB9KSkKICAgICAgICAuZmlsdGVyKGUgPT4gZS5kYXRlID4gbmV3IERhdGUoKSkKICAgICAgICAuc29ydCgoYSwgYikgPT4gKGEuZGF0ZSA+IGIuZGF0ZSA/IDEgOiBiLmRhdGUgPiBhLmRhdGUgPyAtMSA6IDApKTsKICAgIH0KICB9Cn07Cg=="},{"version":3,"sources":["News.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4CA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"News.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div style=\"font-family: serif\" class=\"news\">\n    <div class=\"container\">\n      <h2 id=\"pageTitle\" class=\"d-flex justify-content-start mb-4\">News</h2>\n      <Search id=\"searchBar\" :categories=\"categories\" @change=\"onSearch($event)\"></Search>\n      <div class=\"row\">\n        <div class=\"col-6\">\n          <MainNews :data=\"data[0]\" :isMain=\"true\"></MainNews>\n        </div>\n        <div class=\"col-6\">\n          <SecondaryNews :data=\"data[1]\"></SecondaryNews>\n          <div class=\"row\">\n            <div class=\"col-6\">\n              <TertNews :data=\"data[2]\" :isMain=\"false\"></TertNews>\n            </div>\n            <div class=\"col-6\">\n              <TertNews :data=\"data[3]\" :isMain=\"false\"></TertNews>\n            </div>\n          </div>\n        </div>\n        \n        <div class=\"row\">\n          <div v-for=\"(category, index) in filteredCategories\" :key=\"index\" v-show=\"filterCriteria.includes(category)\" :class=\"`col-${12/filteredCategories.length}`\">\n            <h3>{{category}}</h3>\n            <div\n              v-for=\"(item, index) in getPostsByCategory(category)\"\n              :key=\"index\"\n              v-show=\"item.isShown\"\n              class=\"mb-2\"\n            >\n              <a :href=\"item.url\" target=\"_blank\">\n                <button type=\"button\" class=\"btn btn-info\">{{item.description}}</button>\n              </a>\n            </div>\n          </div>\n        </div>\n\n        <Footer></Footer>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport info from \"js-yaml-loader!../../news.yaml\";\nimport Search from \"./Search\";\nimport MainNews from \"./MainNews\";\nimport SecondaryNews from \"./SecondaryNews\";\nimport TertNews from \"./TertieryNews\";\nimport Footer from \"./Footer\"\n\nexport default {\n  name: \"News\",\n  components: {\n    Search,\n    MainNews,\n    SecondaryNews,\n    TertNews,\n    Footer\n  },\n  data() {\n    return {\n      data: [],\n      categories: {},\n      filteredCategories: [],\n      filterCriteria: [],\n      // postsByCategory: []\n    };\n  },\n  beforeMount() {\n    this.init();\n    this.getAllCategories();\n    this.getFilteredCategories();\n  },\n  methods: {\n    getPostsByCategory(category) {\n      return this.data\n        .slice(4, this.data.length)\n        .filter(e => e.categories.includes(category) && e.isShown);\n    },\n    /**\n     * Gets all categories listed in the cms file\n     */\n    getAllCategories() {\n      let distinctCategories = [\n        ...new Set(\n          [].concat.apply(\n            [],\n            this.data.map(e => e.categories)\n          )\n        )\n      ];\n      this.filterCriteria = distinctCategories;\n      this.categories = distinctCategories.reduce(\n        (a, b) => ((a[b.toLowerCase()] = true), a),\n        {}\n      );\n    },\n    getFilteredCategories() {\n      this.filteredCategories = [\n        ...new Set(\n          [].concat.apply(\n            [],\n            this.data.slice(4, this.data.length).map(e => e.categories)\n          )\n        )\n      ];\n    },\n    /**\n     * If the active categories are used in a single news\n     */\n    someCategory(e) {\n      return e.categories.some(x => this.filterCriteria.includes(x.toLowerCase()));\n    },\n    /**\n     * Combines the logic of the search input and the categories filter\n     */\n    onSearch(data) {\n      let { value, categories } = data;\n      this.init();\n      this.filterCriteria = Object.keys(categories).filter(k => categories[k]);\n      this.data = this.data.map(e => {\n        if (value) {\n          if (\n            !e.description.match(new RegExp(value, \"i\")) ||\n            !this.someCategory( e)\n          )\n            return { ...e, isShown: false };\n          else return e;\n        } else {\n          if (!this.someCategory(e)) return { ...e, isShown: false };\n          else return e;\n        }\n      });\n      this.$forceUpdate()\n    },\n    /**\n     * Prepares the initial data\n     * Sets all categories to be shown\n     */\n    init() {\n      this.data = info\n        .map(e => ({ ...e, isShown: true, date: new Date(e.expiry) }))\n        .filter(e => e.date > new Date())\n        .sort((a, b) => (a.date > b.date ? 1 : b.date > a.date ? -1 : 0));\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"../assets/styles/main.scss\";\n</style>\n"]}]}