{"remainingRequest":"/Users/radoslavradev/Sites/www/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/radoslavradev/Sites/www/src/components/News.vue?vue&type=style&index=0&id=293a9583&lang=scss&scoped=true&","dependencies":[{"path":"/Users/radoslavradev/Sites/www/src/components/News.vue","mtime":1591444688771},{"path":"/Users/radoslavradev/Sites/www/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/radoslavradev/Sites/www/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/radoslavradev/Sites/www/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/radoslavradev/Sites/www/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/radoslavradev/Sites/www/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/radoslavradev/Sites/www/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCkBpbXBvcnQgIi4uL2Fzc2V0cy9zdHlsZXMvbWFpbi5zY3NzIjsK"},{"version":3,"sources":["News.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuJA","file":"News.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div style=\"font-family: serif\" class=\"news\">\n    <div class=\"container\">\n      <h2 id=\"pageTitle\" class=\"d-flex justify-content-start mb-4\">News</h2>\n      <Search id=\"searchBar\" :categories=\"categories\" @change=\"onSearch($event)\"></Search>\n      <div class=\"row\">\n        <div class=\"col-6\">\n          <MainNews :data=\"data[0]\" :isMain=\"true\"></MainNews>\n        </div>\n        <div class=\"col-6\">\n          <SecondaryNews :data=\"data[1]\"></SecondaryNews>\n          <div class=\"row\">\n            <div class=\"col-6\">\n              <TertNews :data=\"data[2]\" :isMain=\"false\"></TertNews>\n            </div>\n            <div class=\"col-6\">\n              <TertNews :data=\"data[3]\" :isMain=\"false\"></TertNews>\n            </div>\n          </div>\n        </div>\n        \n        <div class=\"row\">\n          <div v-for=\"(category, index) in filteredCategories\" :key=\"index\" v-show=\"filterCriteria.includes(category)\" :class=\"`col-${12/filteredCategories.length}`\">\n            <h3>{{category}}</h3>\n            <div\n              v-for=\"(item, index) in getPostsByCategory(category)\"\n              :key=\"index\"\n              v-show=\"item.isShown\"\n              class=\"mb-2\"\n            >\n              <a :href=\"item.url\" target=\"_blank\">\n                <button type=\"button\" class=\"btn btn-info\">{{item.description}}</button>\n              </a>\n            </div>\n          </div>\n        </div>\n\n        <Footer></Footer>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport info from \"js-yaml-loader!../../news.yaml\";\nimport Search from \"./Search\";\nimport MainNews from \"./MainNews\";\nimport SecondaryNews from \"./SecondaryNews\";\nimport TertNews from \"./TertieryNews\";\nimport Footer from \"./Footer\"\n\nexport default {\n  name: \"News\",\n  components: {\n    Search,\n    MainNews,\n    SecondaryNews,\n    TertNews,\n    Footer\n  },\n  data() {\n    return {\n      data: [],\n      categories: {},\n      filteredCategories: [],\n      filterCriteria: [],\n      // postsByCategory: []\n    };\n  },\n  beforeMount() {\n    this.init();\n    this.getAllCategories();\n    this.getFilteredCategories();\n  },\n  methods: {\n    getPostsByCategory(category) {\n      return this.data\n        .slice(4, this.data.length)\n        .filter(e => e.categories.includes(category) && e.isShown);\n    },\n    /**\n     * Gets all categories listed in the cms file\n     */\n    getAllCategories() {\n      let distinctCategories = [\n        ...new Set(\n          [].concat.apply(\n            [],\n            this.data.map(e => e.categories)\n          )\n        )\n      ];\n      this.filterCriteria = distinctCategories;\n      this.categories = distinctCategories.reduce(\n        (a, b) => ((a[b.toLowerCase()] = true), a),\n        {}\n      );\n    },\n    getFilteredCategories() {\n      this.filteredCategories = [\n        ...new Set(\n          [].concat.apply(\n            [],\n            this.data.slice(4, this.data.length).map(e => e.categories)\n          )\n        )\n      ];\n    },\n    /**\n     * If the active categories are used in a single news\n     */\n    someCategory(e) {\n      return e.categories.some(x => this.filterCriteria.includes(x.toLowerCase()));\n    },\n    /**\n     * Combines the logic of the search input and the categories filter\n     */\n    onSearch(data) {\n      let { value, categories } = data;\n      this.init();\n      this.filterCriteria = Object.keys(categories).filter(k => categories[k]);\n      this.data = this.data.map(e => {\n        if (value) {\n          if (\n            !e.description.match(new RegExp(value, \"i\")) ||\n            !this.someCategory( e)\n          )\n            return { ...e, isShown: false };\n          else return e;\n        } else {\n          if (!this.someCategory(e)) return { ...e, isShown: false };\n          else return e;\n        }\n      });\n      this.$forceUpdate()\n    },\n    /**\n     * Prepares the initial data\n     * Sets all categories to be shown\n     */\n    init() {\n      this.data = info\n        .map(e => ({ ...e, isShown: true, date: new Date(e.expiry) }))\n        .filter(e => e.date > new Date())\n        .sort((a, b) => (a.date > b.date ? 1 : b.date > a.date ? -1 : 0));\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"../assets/styles/main.scss\";\n</style>\n"]}]}